{"version":3,"file":"ionic-header-parallax.js","sources":["ng:/ionic-header-parallax/lib/parallax.directive.ts","ng:/ionic-header-parallax/lib/ionic-header-parallax.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { Directive, ElementRef, Input, Renderer2, AfterViewInit } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: 'ion-header[parallax]'\r\n})\r\nexport class ParallaxDirective implements AfterViewInit {\r\n  @Input() imageUrl: string;\r\n  @Input() expandedColor: string;\r\n  @Input() titleColor: string;\r\n  @Input() maximumHeight = 300;\r\n\r\n  header: HTMLElement;\r\n  toolbar: HTMLElement;\r\n  toolbarBackground: HTMLElement;\r\n  imageOverlay: HTMLElement;\r\n  colorOverlay: HTMLElement;\r\n  barButtons: HTMLElement;\r\n  scrollContent: HTMLElement;\r\n  headerHeight: any;\r\n  headerMinHeight: number;\r\n  translateAmt: any;\r\n  scaleAmt: any;\r\n  scrollTop: any;\r\n  lastScrollTop: any;\r\n  ticking: any;\r\n  originalToolbarBgColor: string;\r\n  overlayTitle: HTMLElement;\r\n  ionTitle: HTMLElement;\r\n  overlayButtons: HTMLElement[];\r\n  scrollContentPaddingTop;\r\n\r\n  constructor(public headerRef: ElementRef<HTMLElement>, public renderer: Renderer2) {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    setTimeout(() => {\r\n      this.initElements();\r\n      this.initStyles();\r\n      this.initEvents();\r\n    }, 100);\r\n  }\r\n\r\n  initElements() {\r\n    const parentElement = this.headerRef.nativeElement.parentElement;\r\n    this.header = this.headerRef.nativeElement;\r\n\r\n    this.toolbar = this.header.querySelector('ion-toolbar');\r\n    if (!this.toolbar) { throw new Error('Parallax directive requires a toolbar or navbar element on the page to work.'); }\r\n    this.ionTitle = this.toolbar.querySelector('ion-title');\r\n    this.toolbarBackground = this.toolbar.shadowRoot.querySelector('.toolbar-background');\r\n\r\n    this.barButtons = this.headerRef.nativeElement.querySelector('ion-buttons');\r\n    const ionContent = parentElement.querySelector('ion-content');\r\n    this.scrollContent = ionContent.shadowRoot.querySelector('.inner-scroll');\r\n    if (!this.scrollContent) { throw new Error('Parallax directive requires an <ion-content> element on the page to work.'); }\r\n\r\n    // Create image overlay\r\n    this.imageOverlay = this.renderer.createElement('div');\r\n    this.renderer.addClass(this.imageOverlay, 'image-overlay');\r\n\r\n    this.colorOverlay = this.renderer.createElement('div');\r\n    this.renderer.addClass(this.colorOverlay, 'color-overlay');\r\n\r\n    this.colorOverlay.appendChild(this.imageOverlay);\r\n    this.header.appendChild(this.colorOverlay);\r\n\r\n    // Copy title and buttons\r\n    this.overlayTitle = this.ionTitle && this.ionTitle.cloneNode(true) as HTMLElement;\r\n    if (this.overlayTitle) {\r\n      this.renderer.addClass(this.overlayTitle, 'parallax-title');\r\n      setTimeout(() => {\r\n        const toolbarTitle = this.overlayTitle.shadowRoot.querySelector('.toolbar-title');\r\n        this.renderer.setStyle(toolbarTitle, 'pointer-events', 'unset');\r\n      });\r\n    }\r\n\r\n    if (this.overlayTitle) { this.imageOverlay.appendChild(this.overlayTitle); }\r\n    if (this.barButtons) { this.imageOverlay.appendChild(this.barButtons); }\r\n  }\r\n\r\n  initStyles() {\r\n    this.headerHeight = this.scrollContent.clientHeight;\r\n    this.ticking = false;\r\n\r\n    if (!this.scrollContent || !toolbar) { return; }\r\n\r\n    // fetch styles\r\n    this.maximumHeight = parseFloat(this.maximumHeight.toString());\r\n    this.headerMinHeight = this.toolbar.offsetHeight;\r\n    this.scrollContentPaddingTop = window.getComputedStyle(this.scrollContent, null).paddingTop.replace('px', '');\r\n    this.scrollContentPaddingTop = parseFloat(this.scrollContentPaddingTop);\r\n    this.originalToolbarBgColor = window.getComputedStyle(this.toolbarBackground, null).backgroundColor;\r\n\r\n    // header and title\r\n    this.renderer.setStyle(this.header, 'position', 'relative');\r\n    if (this.overlayTitle) {\r\n      this.renderer.setStyle(this.overlayTitle, 'color', this.titleColor);\r\n      this.renderer.setStyle(this.overlayTitle, 'position', 'absolute');\r\n      this.renderer.setStyle(this.overlayTitle, 'width', '100%');\r\n      this.renderer.setStyle(this.overlayTitle, 'height', '100%');\r\n      this.renderer.setStyle(this.overlayTitle, 'text-align', 'center');\r\n    }\r\n\r\n    // color overlay\r\n    this.renderer.setStyle(this.colorOverlay, 'background-color', this.originalToolbarBgColor);\r\n    this.renderer.setStyle(this.colorOverlay, 'height', `${this.maximumHeight}px`);\r\n    this.renderer.setStyle(this.colorOverlay, 'position', 'absolute');\r\n    this.renderer.setStyle(this.colorOverlay, 'top', `${-this.headerMinHeight * 0}px`);\r\n    this.renderer.setStyle(this.colorOverlay, 'left', '0');\r\n    this.renderer.setStyle(this.colorOverlay, 'width', '100%');\r\n    this.renderer.setStyle(this.colorOverlay, 'z-index', '10');\r\n    this.renderer.setStyle(this.colorOverlay, 'pointer-events', 'none');\r\n\r\n    // image overlay\r\n    this.renderer.setStyle(this.imageOverlay, 'background-color', this.expandedColor);\r\n    this.renderer.setStyle(this.imageOverlay, 'background-image', `url(${this.imageUrl || ''})`);\r\n    this.renderer.setStyle(this.imageOverlay, 'height', `100%`);\r\n    this.renderer.setStyle(this.imageOverlay, 'width', '100%');\r\n    this.renderer.setStyle(this.imageOverlay, 'pointer-events', 'none');\r\n    this.renderer.setStyle(this.imageOverlay, 'background-size', 'cover');\r\n    this.renderer.setStyle(this.imageOverlay, 'background-position', 'center');\r\n\r\n    // .toolbar-background\r\n    this.renderer.setStyle(this.toolbarBackground, 'background-color', this.originalToolbarBgColor);\r\n\r\n    // .bar-buttons\r\n    if (this.barButtons) {\r\n      this.renderer.setStyle(this.barButtons, 'pointer-events', 'all');\r\n      Array.from(this.barButtons.children).forEach(btn => {\r\n        this.renderer.setStyle(btn, 'color', this.titleColor);\r\n      });\r\n    }\r\n\r\n    // .scroll-content\r\n    if (this.scrollContent) {\r\n      this.renderer.setAttribute(this.scrollContent, 'parallax', '');\r\n      this.renderer.setStyle(this.scrollContent, 'padding-top',\r\n        `${this.maximumHeight + this.scrollContentPaddingTop - this.headerMinHeight}px`);\r\n    }\r\n  }\r\n\r\n  initEvents() {\r\n    window.addEventListener('resize', () => {\r\n      this.headerHeight = this.scrollContent.clientHeight;\r\n    }, false);\r\n\r\n    if (this.scrollContent) {\r\n      this.scrollContent.addEventListener('scroll', (e) => {\r\n\r\n        if (!this.ticking) {\r\n          window.requestAnimationFrame(() => {\r\n            this.updateElasticHeader();\r\n          });\r\n        }\r\n        this.ticking = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  updateElasticHeader() {\r\n    if (!this.scrollContent || !toolbar) { return; }\r\n\r\n    this.scrollTop = this.scrollContent.scrollTop;\r\n    if (this.scrollTop >= 0) {\r\n      this.translateAmt = this.scrollTop / 2;\r\n      this.scaleAmt = 1;\r\n    } else {\r\n      this.translateAmt = 0;\r\n      this.scaleAmt = -this.scrollTop / this.headerHeight + 1;\r\n    }\r\n\r\n    // Parallax total progress\r\n    this.headerMinHeight = this.toolbar.offsetHeight;\r\n    let progress = (this.maximumHeight - this.scrollTop - this.headerMinHeight) / (this.maximumHeight - this.headerMinHeight);\r\n    progress = Math.max(progress, 0);\r\n\r\n    // ion-header: set height\r\n    let targetHeight = this.maximumHeight - this.scrollTop;\r\n    targetHeight = Math.max(targetHeight, this.headerMinHeight);\r\n\r\n    // .toolbar-background: change color\r\n    this.renderer.setStyle(this.imageOverlay, 'height', `${targetHeight}px`);\r\n    this.renderer.setStyle(this.imageOverlay, 'opacity', `${progress}`);\r\n    this.renderer.setStyle(this.colorOverlay, 'height', `${targetHeight}px`);\r\n    this.renderer.setStyle(this.colorOverlay, 'opacity', targetHeight > this.headerMinHeight ? '1' : '0');\r\n    this.renderer.setStyle(this.toolbarBackground, 'background-color',\r\n      targetHeight > this.headerMinHeight ? 'transparent' : this.originalToolbarBgColor);\r\n\r\n    // .bar-buttons\r\n    if (this.barButtons) {\r\n      if (targetHeight > this.headerMinHeight) {\r\n        this.imageOverlay.append(this.barButtons);\r\n        Array.from(this.barButtons.children).forEach(btn => {\r\n          this.renderer.setStyle(btn, 'color', this.titleColor);\r\n        });\r\n      } else {\r\n        this.toolbar.append(this.barButtons);\r\n        Array.from(this.barButtons.children).forEach(btn => {\r\n          this.renderer.setStyle(btn, 'color', 'unset');\r\n        });\r\n      }\r\n    }\r\n\r\n    this.ticking = false;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { ParallaxDirective } from './parallax.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ParallaxDirective\r\n  ],\r\n  imports: [\r\n  ],\r\n  exports: [\r\n    ParallaxDirective\r\n  ]\r\n})\r\nexport class IonicHeaderParallaxModule { }\r\n"]}
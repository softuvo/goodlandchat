{"version":3,"sources":["./src/app/pages/group-info-edite/group-info-edite.page.html","./src/app/pages/group-info-edite/group-info-edite-routing.module.ts","./src/app/pages/group-info-edite/group-info-edite.module.ts","./src/app/pages/group-info-edite/group-info-edite.page.scss","./src/app/pages/group-info-edite/group-info-edite.page.ts"],"names":[],"mappings":"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","file":"pages-group-info-edite-group-info-edite-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title *ngIf=\\\"name === 'dec'\\\">Group description</ion-title>\\n    <ion-title *ngIf=\\\"name === 'name'\\\">Enter new subject</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <form [formGroup]=\\\"formGroup\\\" >\\n\\n    <ion-item *ngIf=\\\"name === 'name'\\\">\\n      <ion-input type=\\\"text\\\" formControlName=\\\"name\\\" value=\\\"{{groupName}}\\\" placeholder=\\\"subjetc....\\\"\\n        [(ngModel)]=\\\"changeName\\\">\\n      </ion-input>\\n      <ion-icon slot=\\\"end\\\" src=\\\"assets/smile.svg\\\"></ion-icon>\\n    </ion-item>\\n    <ion-item *ngIf=\\\"name === 'dec'\\\">\\n      <ion-input type=\\\"text\\\" formControlName=\\\"dec\\\" placeholder=\\\"Add group description\\\" [(ngModel)]=\\\"description\\\">\\n      </ion-input>\\n      <ion-icon slot=\\\"end\\\" src=\\\"assets/smile.svg\\\"></ion-icon>\\n    </ion-item>\\n  </form>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button (click)=\\\"back()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n          Cancel\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button (click)=\\\"saveChanges()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n          Ok\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GroupInfoEditePage } from './group-info-edite.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GroupInfoEditePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GroupInfoEditePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GroupInfoEditePageRoutingModule } from './group-info-edite-routing.module';\n\nimport { GroupInfoEditePage } from './group-info-edite.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    GroupInfoEditePageRoutingModule\n  ],\n  declarations: [GroupInfoEditePage]\n})\nexport class GroupInfoEditePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2dyb3VwLWluZm8tZWRpdGUvZ3JvdXAtaW5mby1lZGl0ZS5wYWdlLnNjc3MifQ== */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { AlertService } from 'src/app/services/alert.service';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { DataService } from './../../services/data.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { LoadingService } from 'src/app/services/loading.service';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-group-info-edite',\n  templateUrl: './group-info-edite.page.html',\n  styleUrls: ['./group-info-edite.page.scss'],\n})\nexport class GroupInfoEditePage implements OnInit {\n\n  groupId: any;\n  name: any;\n  groupName: any;\n  changeName;\n\n  user;\n\n  group: any;\n\n\n  description;\n\n  public formGroup: FormGroup;\n\n\n  constructor(\n    private actRoute: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    public dataService: DataService,\n    public angularDb: AngularFireDatabase,\n    public loading: LoadingService,\n    private navCtrl: NavController,\n    private toastController: ToastController,\n    public alertService: AlertService\n\n  ) {\n    this.groupId = this.actRoute.snapshot.paramMap.get('groupId')\n    this.name = this.actRoute.snapshot.paramMap.get('name');\n\n    this.formGroup = this.formBuilder.group({\n      name: new FormControl('', Validators.compose([\n        Validators.required,\n        Validators.minLength(5),\n        Validators.maxLength(30),\n      ])),\n      dec: new FormControl('', Validators.compose([\n        Validators.required,\n        Validators.minLength(5),\n        Validators.maxLength(30),\n      ]))\n    });\n  }\n\n  ngOnInit() {\n    this.dataService.groups(this.groupId).valueChanges().subscribe((group) => {\n      this.group = group;\n    });\n    // let get the databse from the current user\n    this.dataService.getCurrentUser(firebase.auth().currentUser.uid).valueChanges().subscribe((user) => {\n      this.user = user;\n    })\n\n    this.dataService.groups(this.groupId).valueChanges().subscribe((data) => {\n      this.groupName = data.name\n    });\n  }\n\n  // save the changes that your made \n  saveChanges() {\n    if (this.name === 'name' && this.changeName != '') {\n      if (this.group.name != this.changeName) {\n        this.loading.show();\n        this.dataService.groups(this.groupId).update({\n          name: this.changeName,\n        }).then(() => {\n          firebase.database().ref('groups').child(this.groupId).child('messages').push({\n            date: new Date().toString(),\n            userId: firebase.auth().currentUser.uid,\n            type: 'system',\n            message: this.user.nikeName + ' has change the group name to: ' + this.changeName + '.',\n            icon: 'create'\n          }).then((sucess) => {\n            let key = sucess.key\n            for (let i = 0; i < this.group.members.length; i++) {\n              firebase.database().ref('accounts').child(this.group.members[i]).child('groups').child(this.groupId).child('messagesRead').push({\n                key: key\n              })\n            }\n            this.loading.hide();\n            this.alertService.showGroupUpdatedMessage();\n            this.navCtrl.pop();\n          }).catch((error) => {\n            this.loading.hide();\n            this.alertService.showErrorMessage('group/error-update-group');\n          })\n        })\n      }\n    } else if (this.name === 'dec' && this.description != '') {\n      this.loading.show();\n      firebase.database().ref(\"group/\").child(this.groupId).once(\"value\").then((user) => {\n        if (user.val()) {\n          this.angularDb.object(\"group/\" + this.groupId).update({\n            description: this.description\n          }).then(() => {\n            firebase.database().ref('groups').child(this.groupId).child('messages').push({\n              date: new Date().toString(),\n              userId: firebase.auth().currentUser.uid,\n              type: 'system',\n              message: this.user.nikeName + ' has change the group name to: ' + this.description + '.',\n              icon: 'create'\n            }).then((sucess) => {\n              let key = sucess.key\n              for (let i = 0; i < this.group.members.length; i++) {\n                firebase.database().ref('accounts').child(this.group.members[i]).child('groups').child(this.groupId).child('messagesRead').push({\n                  key: key\n                })\n              }\n              this.loading.hide();\n              this.alertService.showGroupUpdatedMessage();\n              this.navCtrl.pop()\n            }).catch((error) => {\n              this.loading.hide();\n              this.alertService.showErrorMessage('group/error-update-group');\n            })\n          })\n        }\n      })\n    }\n  }\n\n  // this handele the back buttom\n  back() {\n    this.navCtrl.pop()\n  }\n\n\n\n\n\n}\n"],"sourceRoot":"webpack:///"}
{"version":3,"sources":["webpack:///src/app/pages/contact/contact.page.html","webpack:///src/app/pages/contact/contact-routing.module.ts","webpack:///src/app/pages/contact/contact.module.ts","webpack:///src/app/pages/contact/contact.page.scss","webpack:///src/app/pages/contact/contact.page.ts"],"names":["routes","path","component","ContactPageRoutingModule","imports","forChild","exports","ContactPageModule","declarations","ContactPage","actRoute","dataService","alertCtrl","loading","afDB","userService","toastController","navCtrl","callNumber","toast","router","userId","snapshot","paramMap","get","currentUserId","currentUser","uid","getCurrentUser","valueChanges","subscribe","user","nikeName","phoneNumber","image","img","description","dateDec","userBock","blocks","isBlock","block","create","header","message","buttons","text","handler","show","deleteChat","then","presentToast","hide","alert","present","blockUser","duration","position","unblock","database","ref","child","remove","deleteConversation","orderByChild","equalTo","once","snap","res","val","store","Object","keys","pop","list","push","date","Date","toString","type","icon","call","err","something","navigate","selector","template"],"mappings":"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","file":"pages-contact-contact-module-es5.js","sourcesContent":["export default \"<ion-header parallax imageUrl=\\\"{{image}}\\\" maximumHeight=\\\"350\\\" expandedColor=\\\"#AAA\\\" titleColor=\\\"white\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      {{nikeName}}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-card>\\n    <ion-item>\\n      <ion-label>Mute notifications</ion-label>\\n      <ion-toggle slot=\\\"end\\\"></ion-toggle>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Custom notifications</ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Media visibility</ion-label>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label>Encryption</ion-label>\\n      <ion-icon color=\\\"secondary\\\" name=\\\"lock-closed\\\" slot=\\\"end\\\"></ion-icon>\\n      <ion-label>Message to this chat and calls are secured with end-to-end encryption. Tap to verify</ion-label>\\n    </ion-item>\\n  </ion-card>\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-subtitle color=\\\"secondary\\\">About and phone number</ion-card-subtitle>\\n      <ion-card-title>{{description}}</ion-card-title>\\n    </ion-card-header>\\n    <ion-card-content>\\n      {{dateDec |  moment:'h:mm A'}}\\n    </ion-card-content>\\n    <ion-item>\\n      <ion-label (click)=\\\"back()\\\">{{phoneNumber}}\\n        <p>Mobile</p>\\n      </ion-label>\\n      <ion-label>\\n        <div style=\\\"float: right;\\\">\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" (click)=\\\"back()\\\" name=\\\"chatbox-ellipses\\\"></ion-icon>\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" name=\\\"call\\\" (click)=\\\"calls()\\\"></ion-icon>\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" name=\\\"videocam\\\" (click)=\\\"videoCall()\\\"></ion-icon>\\n        </div>\\n      </ion-label>\\n    </ion-item>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-card-header>\\n      <ion-card-subtitle color=\\\"secondary\\\">Other phones</ion-card-subtitle>\\n    </ion-card-header>\\n    <ion-item>\\n      <ion-label (click)=\\\"back()\\\" >{{phoneNumber}}\\n        <p>Mobile</p>\\n      </ion-label>\\n      <ion-label>\\n        <div style=\\\"float: right;\\\">\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" (click)=\\\"back()\\\" name=\\\"chatbox-ellipses\\\"></ion-icon>\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" name=\\\"call\\\" (click)=\\\"calls()\\\"></ion-icon>\\n          <ion-icon slot=\\\"icon-only\\\" color=\\\"secondary\\\" name=\\\"videocam\\\" (click)=\\\"videoCall()\\\"(click)=\\\"videoCall()\\\"></ion-icon>\\n        </div>\\n      </ion-label>\\n    </ion-item>\\n  </ion-card>\\n\\n  <ion-card>\\n      <ion-button *ngIf=\\\"!isBlock\\\" (click)=\\\"block()\\\" color=\\\"danger\\\" fill=\\\"clear\\\">Block\\n        <ion-icon slot=\\\"start\\\" color=\\\"danger\\\" src=\\\"assets/icon/block.svg\\\"></ion-icon>\\n      </ion-button>\\n      <ion-button *ngIf=\\\"isBlock\\\" (click)=\\\"unBlock()\\\" color=\\\"medium\\\" fill=\\\"clear\\\">UnBlock\\n        <ion-icon slot=\\\"start\\\" color=\\\"medium\\\" src=\\\"assets/icon/block.svg\\\"></ion-icon>\\n      </ion-button>\\n  </ion-card>\\n\\n  <ion-card>\\n    <ion-button (click)=\\\"report()\\\" color=\\\"danger\\\" fill=\\\"clear\\\">Report contact\\n      <ion-icon slot=\\\"start\\\" color=\\\"danger\\\" src=\\\"assets/icon/dislike.svg\\\"></ion-icon>\\n    </ion-button>\\n  </ion-card>\\n\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ContactPage } from './contact.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ContactPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ContactPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { IonicHeaderParallaxModule } from 'ionic-header-parallax';\n\n\nimport { ContactPageRoutingModule } from './contact-routing.module';\n\nimport { ContactPage } from './contact.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    IonicHeaderParallaxModule,\n    ContactPageRoutingModule\n  ],\n  declarations: [ContactPage]\n})\nexport class ContactPageModule {}\n","export default \"ion-card {\\n  width: 100%;\\n  margin: 0;\\n  margin-bottom: 10px;\\n  position: relative;\\n  top: 50px;\\n  padding-top: 20px;\\n}\\n\\nion-icon {\\n  font-size: x-large;\\n  padding: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY29udGFjdC9jb250YWN0LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLFdBQUE7RUFDQSxTQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxpQkFBQTtBQUFKOztBQUdBO0VBQ0ksa0JBQUE7RUFDQSxhQUFBO0FBQUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jb250YWN0L2NvbnRhY3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNhcmQge1xyXG4gICAgLy8gYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIHRvcDogNTBweDtcclxuICAgIHBhZGRpbmctdG9wOiAyMHB4O1xyXG59XHJcblxyXG5pb24taWNvbiB7XHJcbiAgICBmb250LXNpemU6IHgtbGFyZ2U7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgLy8gY29sb3I6IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnkpO1xyXG59XHJcbiJdfQ== */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { UserService } from './../../services/user.service';\nimport { LoadingService } from './../../services/loading.service';\nimport { AlertController, ToastController, NavController } from '@ionic/angular';\nimport { DataService } from 'src/app/services/data.service';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport * as firebase from 'firebase';\nimport * as _ from 'lodash';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { CallNumber } from '@ionic-native/call-number/ngx';\n\n\n@Component({\n  selector: 'app-contact',\n  templateUrl: './contact.page.html',\n  styleUrls: ['./contact.page.scss'],\n})\nexport class ContactPage implements OnInit {\n\n  userId: any;\n  nikeName: any;\n  phoneNumber: any;\n  image: any;\n  description: any;\n  dateDec: any;\n  isBlock;\n  currentUserId\n\n\n  constructor(\n    private actRoute: ActivatedRoute,\n    public dataService: DataService,\n    private alertCtrl: AlertController,\n    private loading: LoadingService,\n    public afDB: AngularFireDatabase,\n    public userService: UserService,\n    private toastController: ToastController,\n    private navCtrl: NavController,\n    private callNumber: CallNumber,\n    private toast: ToastController,\n    private router: Router\n  ) {\n    // get the userId has been pass\n    this.userId = this.actRoute.snapshot.paramMap.get('userId')\n    // pass the current user have been using\n    this.currentUserId = firebase.auth().currentUser.uid;\n  }\n\n  //Initialize the App after loaded\n  ngOnInit() {\n    // fetch the data info\n    this.dataService.getCurrentUser(this.userId).valueChanges().subscribe((user) => {\n      this.nikeName = user.nikeName;\n      this.phoneNumber = user.phoneNumber;\n      this.image = user.img;\n      this.description = user.description;\n      this.dateDec = user.dateDec;\n      this.dataService.userBock(firebase.auth().currentUser.uid).valueChanges().subscribe((blocks) => {\n        this.isBlock = _.findKey(blocks, block => {\n          return block = firebase.auth().currentUser.uid;\n        })\n        // if has been blocked pass the true condition \n        if (this.isBlock) {\n          this.isBlock = true;\n        } else {\n          // if not pass false condition\n          this.isBlock = false;\n        }\n      })\n    })\n  }\n\n  //Report the user to the owner of the app..\n  // and else Block the user clear the caht messages\n  async report() {\n    const alert = await this.alertCtrl.create({\n      header: 'Report this contact to WhatsApp from Pagas',\n      message: \"Block contact and delete this chat's messages\",\n      buttons: [\n        {\n          text: \"CANCEL\",\n          handler: () => { }\n        },\n        {\n          text: \"REPORT\",\n          handler: () => {\n            this.loading.show()\n            this.deleteChat().then(() => {\n              this.presentToast()\n              this.loading.hide();\n              if (!this.isBlock) {\n                this.block();\n              }\n            })\n          }\n        }\n      ]\n    })\n    alert.present();\n  }\n\n  // Block Function\n  async block() {\n    // if not bloked will be present this methode\n    if (!this.isBlock) {\n      const alert = await this.alertCtrl.create({\n        message: \"Block\" + this.nikeName + \"Blocked contacts will no longer be able to call you or send messages.\",\n        buttons: [\n          {\n            text: \"CANCEL\",\n            handler: () => { }\n          },\n          {\n            text: \"BLOCK\",\n            handler: () => {\n              this.blockUser()\n            }\n          }\n        ]\n      })\n      alert.present();\n    }\n  }\n  // present the toast notification\n  async presentToast() {\n    const toast = await this.toastController.create({\n      message: 'Report sent and' + this.nikeName + 'has been blocked',\n      duration: 2000,\n      position: 'middle'\n    });\n    toast.present();\n  }\n\n  // unBlock the User\n  unBlock() {\n    //loading Show\n    this.loading.show()\n    this.userService.unblock(this.currentUserId, this.userId).then(() => {\n      //loading hide\n      this.loading.hide();\n    })\n  }\n\n  // Block the User\n  blockUser() {\n    // loading show\n    this.loading.show()\n    this.userService.block(this.currentUserId, this.userId).then(() => {\n      //loading hide\n      this.loading.hide();\n    })\n  }\n\n  //Delete the chat conversation\n  async deleteChat() {\n    // loading show\n    this.loading.show();\n    await this.afDB.database.ref('messages').child(firebase.auth().currentUser.uid).child(this.userId).remove().then(() => {\n      // and also the conversation\n      this.deleteConversation();\n      //loading hide\n      this.loading.hide();\n    })\n  }\n  // this will delete the conversation content;\n  async deleteConversation() {\n    await this.afDB.database.ref('conversations').child(firebase.auth().currentUser.uid).orderByChild('userId').equalTo(this.userId).once('value', snap => {\n      var res = snap.val();\n      if (res != null) {\n        let store = Object.keys(res)\n        this.afDB.database.ref('conversations').child(firebase.auth().currentUser.uid).child(store[0]).remove();\n      }\n    })\n  }\n\n  //pop back\n  back() {\n    this.navCtrl.pop()\n  }\n\n  // make dial call\n  calls() {\n    this.callNumber.callNumber(`${this.phoneNumber}`, true).then(() => {\n      this.afDB.list('/accounts/' + firebase.auth().currentUser.uid + '/call/').push({\n        date: new Date().toString(),\n        userId: this.userId,\n        type: 'calling',\n        icon: 'call',\n        call: 'call'\n      }).then(() => {\n        this.afDB.list('/accounts/' + this.userId + '/call/').push({\n          date: new Date().toString(),\n          userId: firebase.auth().currentUser.uid,\n          type: 'calling',\n          icon: 'call',\n          call: 'misscall'\n        })\n      })\n      // if something goes wrong toast will handle the case\n    }).catch(err => this.something());\n  }\n\n  //toast notification\n  async something() {\n    const toast = await this.toast.create({\n      message: 'Something going wrong.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n\n  // make video calls\n  videoCall() {\n    this.router.navigate([\"/calling\", { 'image': this.image, 'name': this.nikeName, 'userId': this.userId }])\n  }\n\n\n}\n"]}
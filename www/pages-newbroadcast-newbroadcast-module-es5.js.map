{"version":3,"sources":["webpack:///src/app/pages/newbroadcast/newbroadcast.page.html","webpack:///src/app/pages/newbroadcast/newbroadcast-routing.module.ts","webpack:///src/app/pages/newbroadcast/newbroadcast.module.ts","webpack:///src/app/pages/newbroadcast/newbroadcast.page.scss","webpack:///src/app/pages/newbroadcast/newbroadcast.page.ts"],"names":["routes","path","component","NewbroadcastPageRoutingModule","imports","forChild","exports","NewbroadcastPageModule","declarations","NewbroadcastPage","dataService","toastController","loading","angularDb","navCtrl","broadcast","broadcastMembers","userId","currentUser","uid","getUsers","valueChanges","subscribe","accounts","account","push","index","i","length","splice","newBroadcast","friend","promise","Promise","resolve","show","messages","lengthMemeber","date","Date","toString","type","message","members","img","name","admin","list","then","success","groupId","key","update","convasation","me","view","database","ref","child","hide","pop","selector","template"],"mappings":"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","file":"pages-newbroadcast-newbroadcast-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <div style=\\\"padding-left: 5px;\\\">\\n      <span style=\\\"font-size: 17px;\\n    font-weight: 600;\\n    text-overflow: ellipsis;\\n    letter-spacing: 0.3px;\\n    overflow: hidden;\\n    white-space: nowrap;\\n    display: block;\\\">New broadcast</span>\\n      <ion-label class=\\\"ion-text-center\\\">{{broadcastMembers.length}} of 256 selected</ion-label>\\n    </div>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div style=\\\"padding-top: 10px; padding-bottom: 20px;\\\">\\n    <div class=\\\"groupAdded\\\">\\n      <div class=\\\"thumnails\\\" *ngIf=\\\"broadcastMembers\\\">\\n        <div class=\\\"list-thumbnail\\\">\\n          <div class=\\\"img-thumb\\\" *ngFor=\\\"let member of broadcastMembers\\\" (click)=\\\"removeFromGroup(member)\\\">\\n            <ion-avatar>\\n              <img [src]=\\\"member.img\\\" />\\n            </ion-avatar>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n  <ion-list *ngFor=\\\"let account of accounts\\\">\\n    <div *ngIf=\\\"account.userId != userId \\\">\\n      <ion-item style=\\\"background-color:transparent !important; padding-left:0 !important; margin-left:0 !important;\\\"\\n        *ngIf=\\\"!inGroup(account)\\\" (click)=\\\"addToGroup(account); $event.stopPropagation();\\\">\\n        <div class=\\\"profileimage\\\">\\n          <img src=\\\"{{account.img}}\\\" alt=\\\"\\\">\\n        </div>\\n        <ion-label style=\\\"font-weight: 600; padding-left: 10px;\\\">\\n          <span style=\\\"font-size:16px; text-transform: capitalize;\\\">\\n            {{account.nikeName}}\\n          </span>\\n          <span style=\\\"display: flex;margin-top: 6px;\\\">\\n            <span style=\\\"opacity: 0.6;font-size: 13px;margin-left: 2px;\\\">\\n              {{account.description}}\\n            </span>\\n          </span>\\n        </ion-label>\\n      </ion-item>\\n    </div>\\n\\n    <ion-item style=\\\"background-color:transparent !important; padding-left:0 !important; margin-left:0 !important;\\\"\\n      *ngIf=\\\"inGroup(account)\\\" (click)=\\\"removeFromGroup(account); $event.stopPropagation();\\\">\\n      <div class=\\\"profileimage\\\">\\n        <img src=\\\"{{account.img}}\\\" alt=\\\"\\\">\\n        <ion-icon slot=\\\"start\\\" name=\\\"checkmark-circle\\\" color=\\\"primary\\\"\\n          style=\\\"margin-bottom:0 !important;margin-left:29px !important;margin-top:33px !important; position: absolute; font-size: x-large;\\\">\\n        </ion-icon>\\n      </div>\\n\\n      <ion-label style=\\\"font-weight: 600; padding-left: 10px;\\\">\\n        <span style=\\\"font-size:16px; text-transform: capitalize;\\\">\\n          {{account.nikeName}}\\n        </span>\\n        <span style=\\\"display: flex;margin-top: 6px;\\\">\\n          <span style=\\\"opacity: 0.6;font-size: 13px;margin-left: 2px;\\\">\\n            {{account.description}}\\n          </span>\\n        </span>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ng-container>\\n      <ion-fab-button (click)=\\\"newBroadcast()\\\">\\n        <ion-icon expand=\\\"icon-only\\\" name=\\\"checkmark\\\"></ion-icon>\\n      </ion-fab-button>\\n    </ng-container>\\n  </ion-fab>\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewbroadcastPage } from './newbroadcast.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewbroadcastPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewbroadcastPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewbroadcastPageRoutingModule } from './newbroadcast-routing.module';\n\nimport { NewbroadcastPage } from './newbroadcast.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    NewbroadcastPageRoutingModule\n  ],\n  declarations: [NewbroadcastPage]\n})\nexport class NewbroadcastPageModule {}\n","export default \".thumnails {\\n  overflow-x: scroll;\\n  overflow-y: hidden;\\n}\\n.thumnails .list-thumbnail {\\n  height: 100%;\\n  white-space: nowrap;\\n}\\n.thumnails .list-thumbnail .img-thumb {\\n  display: inline-block;\\n  border-radius: 4px;\\n  width: 50px;\\n  margin: 0 15px 0 0;\\n  line-height: 60px;\\n}\\n::-webkit-scrollbar {\\n  display: none;\\n}\\nion-content ion-toolbar {\\n  --background: translucent;\\n}\\n.usernameView {\\n  text-align: center;\\n  font-size: small;\\n  font-weight: bolder;\\n}\\ndiv.profileimage {\\n  padding: 3px;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 100%;\\n}\\ndiv.profileimage img {\\n  height: 50px;\\n  width: 58px;\\n  border-radius: 100%;\\n}\\ndiv.headers {\\n  padding: 3px;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 100%;\\n}\\ndiv.headers img {\\n  height: 50px;\\n  width: 58px;\\n  border-radius: 100%;\\n}\\n.backgrondColor {\\n  padding-top: 10px;\\n  background: #dbdada;\\n  height: 80vh;\\n}\\n.img-wrapper {\\n  min-height: 100px;\\n  width: 100%;\\n  background-size: cover;\\n  background-repeat: no-repeat;\\n  border-radius: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbmV3YnJvYWRjYXN0L25ld2Jyb2FkY2FzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLGtCQUFBO0FBQ0o7QUFBSTtFQUNJLFlBQUE7RUFDQSxtQkFBQTtBQUVSO0FBRFE7RUFDSSxxQkFBQTtFQUNBLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLGtCQUFBO0VBQ0EsaUJBQUE7QUFHWjtBQUNBO0VBQ0ksYUFBQTtBQUVKO0FBQUE7RUFDSSx5QkFBQTtBQUdKO0FBREE7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUFJSjtBQUZBO0VBQ0ksWUFBQTtFQUNBLGFBQUE7RUFDQSxxQkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQUtKO0FBSkk7RUFDSSxZQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0FBTVI7QUFGQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0EscUJBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsbUJBQUE7QUFLSjtBQUpJO0VBQ0ksWUFBQTtFQUNBLFdBQUE7RUFFQSxtQkFBQTtBQUtSO0FBREE7RUFDSSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtBQUlKO0FBREE7RUFDSSxpQkFBQTtFQUNBLFdBQUE7RUFDQSxzQkFBQTtFQUNBLDRCQUFBO0VBQ0EsbUJBQUE7QUFJSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL25ld2Jyb2FkY2FzdC9uZXdicm9hZGNhc3QucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRodW1uYWlscyB7XHJcbiAgICBvdmVyZmxvdy14OiBzY3JvbGw7XHJcbiAgICBvdmVyZmxvdy15OiBoaWRkZW47XHJcbiAgICAubGlzdC10aHVtYm5haWwge1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xyXG4gICAgICAgIC5pbWctdGh1bWIge1xyXG4gICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgd2lkdGg6IDUwcHg7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCAxNXB4IDAgMDtcclxuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDYwcHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbjo6LXdlYmtpdC1zY3JvbGxiYXIge1xyXG4gICAgZGlzcGxheTogbm9uZTtcclxufVxyXG5pb24tY29udGVudCBpb24tdG9vbGJhciB7XHJcbiAgICAtLWJhY2tncm91bmQ6IHRyYW5zbHVjZW50O1xyXG59XHJcbi51c2VybmFtZVZpZXcge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgZm9udC1zaXplOiBzbWFsbDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkZXI7XHJcbn1cclxuZGl2LnByb2ZpbGVpbWFnZSB7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTAwJTtcclxuICAgIGltZyB7XHJcbiAgICAgICAgaGVpZ2h0OiA1MHB4O1xyXG4gICAgICAgIHdpZHRoOiA1OHB4O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmRpdi5oZWFkZXJzIHtcclxuICAgIHBhZGRpbmc6IDNweDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG4gICAgaW1nIHtcclxuICAgICAgICBoZWlnaHQ6IDUwcHg7XHJcbiAgICAgICAgd2lkdGg6IDU4cHg7XHJcbiAgICAgICAgLy8gaGVpZ2h0OiA2MHB4O1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgICB9XHJcbn1cclxuXHJcbi5iYWNrZ3JvbmRDb2xvciB7XHJcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcclxuICAgIGJhY2tncm91bmQ6ICNkYmRhZGE7XHJcbiAgICBoZWlnaHQ6IDgwdmg7XHJcbn1cclxuXHJcbi5pbWctd3JhcHBlciB7XHJcbiAgICBtaW4taGVpZ2h0OiAxMDBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxuICAgIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG59XHJcbiJdfQ== */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { LoadingService } from './../../services/loading.service';\nimport { DataService } from 'src/app/services/data.service';\nimport { Component, OnInit } from '@angular/core';\nimport { ToastController, NavController } from '@ionic/angular';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-newbroadcast',\n  templateUrl: './newbroadcast.page.html',\n  styleUrls: ['./newbroadcast.page.scss'],\n})\nexport class NewbroadcastPage implements OnInit {\n\n  accounts: any;\n  account: any;\n  broadcast = <any>{};\n\n\n  broadcastMembers = [];\n\n  userId\n\n\n\n  constructor(\n    public dataService: DataService,\n    private toastController: ToastController,\n    public loading: LoadingService,\n    public angularDb: AngularFireDatabase,\n    private navCtrl: NavController\n\n  ) {\n    this.userId = firebase.auth().currentUser.uid;\n  }\n\n  ngOnInit() {\n    this.dataService.getUsers().valueChanges().subscribe((accounts) => {\n      this.accounts = accounts;\n    });\n  }\n\n  //Add friend to member of groups\n  addToGroup(account) {\n    this.broadcastMembers.push(account)\n  }\n  // Remove friend from members of group.\n  removeFromGroup(account) {\n    var index = -1;\n    for (var i = 0; i < this.broadcastMembers.length; i++) {\n      if (this.broadcastMembers[i].userId == account.userId) {\n        index = i;\n      }\n    }\n    if (index > -1) {\n      this.broadcastMembers.splice(index, 1);\n    }\n  }\n\n\n  async presentToast() {\n    this.newBroadcast()\n  }\n\n  // Check if friend is already added to the group or not.\n  inGroup(friend) {\n    for (var i = 0; i < this.broadcastMembers.length; i++) {\n      if (this.broadcastMembers[i].userId == friend.userId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  newBroadcast() {\n    var promise = new Promise((resolve) => {\n      this.loading.show();\n      var messages = []\n      let lengthMemeber = this.broadcastMembers.length;\n      //add system message that group is created\n      messages.push({\n        date: new Date().toString(),\n        userId: firebase.auth().currentUser.uid,\n        type: 'system',\n        message: 'You created a broadcast list with ' + lengthMemeber + ' recipients.',\n      });\n      // Add members of the group\n      var members = [];\n      for (let i = 0; i < this.broadcastMembers.length; i++) {\n        //let push the group member to member with only userId\n        members.push(this.broadcastMembers[i].userId);\n      }\n      //Add group information and date\n\n      this.broadcast.date = new Date().toString()\n      this.broadcast.messages = messages;\n      this.broadcast.members = members;\n      this.broadcast.img = \"assets/broadcast.png\";\n      this.broadcast.name = \"Broadcast\";\n      this.broadcast.admin = [firebase.auth().currentUser.uid];\n\n      // Lets add to firebase database\n      this.angularDb.list('/groups/').push(this.broadcast).then((success) => {\n        var groupId = success.key;\n        //update the key\n        success.update({\n          key: groupId\n        });\n        var convasation = {\n          key: groupId,\n          me: \"you\",\n          type: 'text',\n          view: 'broadcast',\n          date: new Date().toString(),\n        }\n        //add group referenceuser to user;\n        this.angularDb.database.ref('conversations').child(firebase.auth().currentUser.uid).push(convasation).then(() => {\n          // resolve(true);\n        }).then(() => {\n          this.loading.hide();\n          this.navCtrl.pop();\n        })\n      })\n    })\n    return promise;\n  }\n\n}\n"]}
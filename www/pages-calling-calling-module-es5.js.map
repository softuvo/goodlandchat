{"version":3,"sources":["webpack:///src/app/pages/calling/calling.page.html","webpack:///src/app/pages/calling/calling-routing.module.ts","webpack:///src/app/pages/calling/calling.module.ts","webpack:///src/app/pages/calling/calling.page.scss","webpack:///src/app/pages/calling/calling.page.ts"],"names":["routes","path","component","CallingPageRoutingModule","imports","forChild","exports","CallingPageModule","declarations","CallingPage","navCtrl","actRoute","nativeAudio","toastController","angularDb","loading","showRemoteVideo","showMyVideo","incomingCallId","preloadSimple","image","snapshot","paramMap","get","name","userId","play","setTimeout","presentToast","apiRTC","init","apiKey","onReady","e","sessionReadyHandler","myCallId","session","apiCCId","InitializeControls","AddEventListeners","InitializeWebRTCClient","showCall","showAnswer","showReject","showHangup","callId","webRTCClient","removeElementFromDiv","createWebRTCClient","status","addEventListener","showStatus","addStreamInDiv","detail","stream","callType","width","height","InitializeControlsForHangup","InitializeControlsForIncomingCall","lastEstablishedCall","reason","RemoveMediaElements","setAllowMultipleCalls","setVideoBandwidth","setUserAcceptOnIncomingCall","show","list","currentUser","uid","push","date","Date","toString","type","icon","call","then","stop","pop","hide","create","message","duration","toast","present","selector","template"],"mappings":"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","file":"pages-calling-calling-module-es5.js","sourcesContent":["export default \"<ion-content>\\n    <div>\\n        <div class=\\\"profileimage\\\">\\n            <img src=\\\"{{image}}\\\" alt=\\\"\\\">\\n        </div>\\n        <p style=\\\"text-align: center;\\\">{{name}}</p>\\n        <p style=\\\"text-align: center;\\\">Calling</p>\\n    </div>\\n\\n    <ion-grid fixed>\\n        <ion-row>\\n            <ion-col>\\n                <button *ngIf=\\\"showCall\\\" ion-button block>Call</button>\\n            </ion-col>\\n            <ion-col>\\n                <button *ngIf=\\\"showHangup\\\" ion-button block color=\\\"danger\\\">Hangup</button>\\n            </ion-col>\\n        </ion-row>\\n        <ion-row>\\n            <ion-col>\\n                <button *ngIf=\\\"showAnswer\\\" ion-button block color=\\\"secondary\\\">Answer</button>\\n            </ion-col>\\n            <ion-col>\\n                <button *ngIf=\\\"showReject\\\" ion-button block color=\\\"danger\\\">Reject</button>\\n            </ion-col>\\n        </ion-row>\\n        <ion-row>\\n            <ion-col>\\n                <p *ngIf=\\\"showStatus\\\" [innerHtml]=\\\"status\\\"></p>\\n            </ion-col>\\n        </ion-row>\\n        <ion-card>\\n            <video src=\\\"\\\"></video>\\n            <video src=\\\"\\\"></video>\\n\\n        </ion-card>\\n    </ion-grid>\\n\\n    <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"center\\\" slot=\\\"fixed\\\">\\n        <ion-fab-button color=\\\"danger\\\" (click)=\\\"endCall()\\\">\\n            <ion-icon name=\\\"call\\\"></ion-icon>\\n        </ion-fab-button>\\n    </ion-fab>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CallingPage } from './calling.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CallingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CallingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CallingPageRoutingModule } from './calling-routing.module';\n\nimport { CallingPage } from './calling.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    PipesModule,\n    IonicModule,\n    CallingPageRoutingModule\n  ],\n  declarations: [CallingPage]\n})\nexport class CallingPageModule {}\n","export default \"div.profileimage {\\n  padding: 3px;\\n  display: flex;\\n  padding-top: 25px;\\n  flex-flow: row nowrap;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 100%;\\n}\\ndiv.profileimage img {\\n  width: 30%;\\n  height: 100%;\\n  border-radius: 100%;\\n}\\nion-fab {\\n  padding-bottom: 50px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvY2FsbGluZy9jYWxsaW5nLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLFlBQUE7RUFDQSxhQUFBO0VBQ0EsaUJBQUE7RUFDQSxxQkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQUNKO0FBQUk7RUFDSSxVQUFBO0VBQ0EsWUFBQTtFQUNBLG1CQUFBO0FBRVI7QUFDQTtFQUNJLG9CQUFBO0FBRUoiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jYWxsaW5nL2NhbGxpbmcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiZGl2LnByb2ZpbGVpbWFnZSB7XHJcbiAgICBwYWRkaW5nOiAzcHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgcGFkZGluZy10b3A6IDI1cHg7XHJcbiAgICBmbGV4LWZsb3c6IHJvdyBub3dyYXA7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG4gICAgaW1nIHtcclxuICAgICAgICB3aWR0aDogMzAlO1xyXG4gICAgICAgIGhlaWdodDogMTAwJTtcclxuICAgICAgICBib3JkZXItcmFkaXVzOiAxMDAlO1xyXG4gICAgfVxyXG59XHJcbmlvbi1mYWIge1xyXG4gICAgcGFkZGluZy1ib3R0b206IDUwcHg7XHJcbn1cclxuIl19 */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { LoadingService } from './../../services/loading.service';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { Component, OnInit } from '@angular/core';\nimport { NativeAudio } from '@ionic-native/native-audio/ngx';\nimport * as firebase from 'firebase';\n\ndeclare var apiRTC: any\n\n@Component({\n  selector: 'app-calling',\n  templateUrl: './calling.page.html',\n  styleUrls: ['./calling.page.scss'],\n})\nexport class CallingPage implements OnInit {\n\n\n  showCall: boolean;\n  showHangup: boolean;\n  showAnswer: boolean;\n  showReject: boolean;\n  showStatus: boolean;\n  showRemoteVideo: boolean = true;\n  showMyVideo: boolean = true;\n\n  session;\n  webRTCClient;\n  incomingCallId = 0;\n  myCallId;\n  status;\n  calleeId;\n  image;\n  name;\n  userId\n\n  constructor(\n    private navCtrl: NavController,\n    private actRoute: ActivatedRoute,\n    private nativeAudio: NativeAudio,\n    private toastController: ToastController,\n    public angularDb: AngularFireDatabase,\n    public loading: LoadingService\n  ) {\n    this.nativeAudio.preloadSimple('calling', 'assets/audio/PhoneRinging.wav');\n    // this.InitializeApiRTC();\n    this.image = this.actRoute.snapshot.paramMap.get('image')\n    this.name = this.actRoute.snapshot.paramMap.get('name')\n    this.userId = this.actRoute.snapshot.paramMap.get('userId');\n\n  }\n\n\n  ngOnInit() {\n    // let update who on the calling \n\n\n    // this.dataService.groups(this.groupId).remove();\n    this.nativeAudio.play('calling')\n\n    setTimeout(() => {\n      this.presentToast()\n    }, 5000);\n  }\n\n  InitializeApiRTC() {\n    //apiRTC initialization\n    apiRTC.init({\n      apiKey: \"819abef1fde1c833e0601ec6dd4a8226\",\n      // apiCCId : \"2\",\n      onReady: (e) => {\n        this.sessionReadyHandler(e);\n      }\n    });\n  }\n\n  sessionReadyHandler(e) {\n    this.myCallId = apiRTC.session.apiCCId;\n    this.InitializeControls();\n    this.AddEventListeners();\n    this.InitializeWebRTCClient();\n  }\n\n  InitializeControlsForHangup() {\n    this.showCall = true;\n    this.showAnswer = false;\n    this.showReject = false;\n    this.showHangup = false;\n  }\n\n  RemoveMediaElements(callId) {\n    this.webRTCClient.removeElementFromDiv('mini', 'miniElt-' + callId);\n    this.webRTCClient.removeElementFromDiv('remote', 'remoteElt-' + callId);\n  }\n\n\n  InitializeWebRTCClient() {\n    this.webRTCClient = apiRTC.session.createWebRTCClient({\n      status: \"status\" //Optionnal\n    });\n    /*    this.webRTCClient.setAllowMultipleCalls(true);\n        this.webRTCClient.setVideoBandwidth(300);\n        this.webRTCClient.setUserAcceptOnIncomingCall(true);*/\n  }\n\n  InitializeControls() {\n    this.showCall = true;\n    this.showAnswer = false;\n    this.showHangup = false;\n    this.showReject = false;\n  }\n\n  InitializeControlsForIncomingCall() {\n    this.showCall = false;\n    this.showAnswer = true;\n    this.showReject = true;\n    this.showHangup = true;\n\n  }\n\n  AddEventListeners() {\n    apiRTC.addEventListener(\"userMediaSuccess\", (e) => {\n      this.showStatus = true;\n      this.showMyVideo = true;\n\n      this.webRTCClient.addStreamInDiv(e.detail.stream, e.detail.callType, \"mini\", 'miniElt-' + e.detail.callId, {\n        width: \"128px\",\n        height: \"96px\"\n      }, true);\n\n    });\n\n    apiRTC.addEventListener(\"userMediaError\", (e) => {\n      this.InitializeControlsForHangup();\n      this.status = this.status + \"<br/> The following error has occurred <br/> \" + e;\n    });\n\n    apiRTC.addEventListener(\"incomingCall\", (e) => {\n      this.InitializeControlsForIncomingCall();\n      this.incomingCallId = e.detail.callId;\n    });\n\n    apiRTC.addEventListener(\"hangup\", (e) => {\n      if (e.detail.lastEstablishedCall === true) {\n        this.InitializeControlsForHangup();\n      }\n      this.status = this.status + \"<br/> The call has been hunged up due to the following reasons <br/> \" + e.detail.reason;\n      this.RemoveMediaElements(e.detail.callId);\n    });\n\n    apiRTC.addEventListener(\"remoteStreamAdded\", (e) => {\n      this.webRTCClient.addStreamInDiv(e.detail.stream, e.detail.callType, \"remote\", 'remoteElt-' + e.detail.callId, {\n        width: \"300px\",\n        height: \"225px\"\n      }, false);\n    });\n\n    apiRTC.addEventListener(\"webRTCClientCreated\", (e) => {\n      // console.log(\"webRTC Client Created\");\n      this.webRTCClient.setAllowMultipleCalls(true);\n      this.webRTCClient.setVideoBandwidth(300);\n      this.webRTCClient.setUserAcceptOnIncomingCall(true);\n\n      /*      this.InitializeControls();\n            this.AddEventListeners();*/\n\n      //this.MakeCall(\"729278\");\n    });\n\n  }\n\n  //end the call\n  endCall() {\n    \n    this.loading.show()\n    this.angularDb.list('/accounts/' + firebase.auth().currentUser.uid + '/call/').push({\n      date: new Date().toString(),\n      userId: this.userId,\n      type: 'calling',\n      icon: 'videocam',\n      call: 'call'\n    }).then(() => {\n      this.angularDb.list('/accounts/' + this.userId + '/call/').push({\n        date: new Date().toString(),\n        userId: firebase.auth().currentUser.uid,\n        type: 'calling',\n        icon: 'videocam',\n        call: 'misscall'\n      }).then(() => {\n        this.nativeAudio.stop('calling')\n        this.navCtrl.pop();\n        this.loading.hide();\n      });\n    })\n  }\n\n  //present the toast notification\n  async presentToast() {\n    const toast = await this.toastController.create({\n      message: 'If not working on your phone will be updated on next version? send your Bugs.',\n      duration: 2000\n    });\n    toast.present();\n  }\n\n}\n"]}
{"version":3,"sources":["webpack:///src/app/pages/group-info-edite/group-info-edite.page.html","webpack:///src/app/pages/group-info-edite/group-info-edite-routing.module.ts","webpack:///src/app/pages/group-info-edite/group-info-edite.module.ts","webpack:///src/app/pages/group-info-edite/group-info-edite.page.scss","webpack:///src/app/pages/group-info-edite/group-info-edite.page.ts"],"names":["routes","path","component","GroupInfoEditePageRoutingModule","imports","forChild","exports","GroupInfoEditePageModule","declarations","GroupInfoEditePage","actRoute","formBuilder","dataService","angularDb","loading","navCtrl","toastController","alertService","groupId","snapshot","paramMap","get","name","formGroup","group","compose","required","minLength","maxLength","dec","groups","valueChanges","subscribe","getCurrentUser","currentUser","uid","user","data","groupName","changeName","show","update","then","ref","child","push","date","Date","toString","userId","type","message","nikeName","icon","sucess","key","i","members","length","hide","showGroupUpdatedMessage","pop","error","showErrorMessage","description","once","val","object","selector","template"],"mappings":"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","file":"pages-group-info-edite-group-info-edite-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n    </ion-buttons>\\n    <ion-title *ngIf=\\\"name === 'dec'\\\">Group description</ion-title>\\n    <ion-title *ngIf=\\\"name === 'name'\\\">Enter new subject</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <form [formGroup]=\\\"formGroup\\\" >\\n\\n    <ion-item *ngIf=\\\"name === 'name'\\\">\\n      <ion-input type=\\\"text\\\" formControlName=\\\"name\\\" value=\\\"{{groupName}}\\\" placeholder=\\\"subjetc....\\\"\\n        [(ngModel)]=\\\"changeName\\\">\\n      </ion-input>\\n      <ion-icon slot=\\\"end\\\" src=\\\"assets/smile.svg\\\"></ion-icon>\\n    </ion-item>\\n    <ion-item *ngIf=\\\"name === 'dec'\\\">\\n      <ion-input type=\\\"text\\\" formControlName=\\\"dec\\\" placeholder=\\\"Add group description\\\" [(ngModel)]=\\\"description\\\">\\n      </ion-input>\\n      <ion-icon slot=\\\"end\\\" src=\\\"assets/smile.svg\\\"></ion-icon>\\n    </ion-item>\\n  </form>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-row>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button (click)=\\\"back()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n          Cancel\\n        </ion-button>\\n      </ion-col>\\n      <ion-col size=\\\"6\\\">\\n        <ion-button (click)=\\\"saveChanges()\\\" expand=\\\"block\\\" fill=\\\"clear\\\" shape=\\\"round\\\">\\n          Ok\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { GroupInfoEditePage } from './group-info-edite.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: GroupInfoEditePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class GroupInfoEditePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { GroupInfoEditePageRoutingModule } from './group-info-edite-routing.module';\n\nimport { GroupInfoEditePage } from './group-info-edite.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    GroupInfoEditePageRoutingModule\n  ],\n  declarations: [GroupInfoEditePage]\n})\nexport class GroupInfoEditePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2dyb3VwLWluZm8tZWRpdGUvZ3JvdXAtaW5mby1lZGl0ZS5wYWdlLnNjc3MifQ== */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { AlertService } from 'src/app/services/alert.service';\nimport { NavController, ToastController } from '@ionic/angular';\nimport { DataService } from './../../services/data.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { LoadingService } from 'src/app/services/loading.service';\nimport * as firebase from 'firebase';\n\n@Component({\n  selector: 'app-group-info-edite',\n  templateUrl: './group-info-edite.page.html',\n  styleUrls: ['./group-info-edite.page.scss'],\n})\nexport class GroupInfoEditePage implements OnInit {\n\n  groupId: any;\n  name: any;\n  groupName: any;\n  changeName;\n\n  user;\n\n  group: any;\n\n\n  description;\n\n  public formGroup: FormGroup;\n\n\n  constructor(\n    private actRoute: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    public dataService: DataService,\n    public angularDb: AngularFireDatabase,\n    public loading: LoadingService,\n    private navCtrl: NavController,\n    private toastController: ToastController,\n    public alertService: AlertService\n\n  ) {\n    this.groupId = this.actRoute.snapshot.paramMap.get('groupId')\n    this.name = this.actRoute.snapshot.paramMap.get('name');\n\n    this.formGroup = this.formBuilder.group({\n      name: new FormControl('', Validators.compose([\n        Validators.required,\n        Validators.minLength(5),\n        Validators.maxLength(30),\n      ])),\n      dec: new FormControl('', Validators.compose([\n        Validators.required,\n        Validators.minLength(5),\n        Validators.maxLength(30),\n      ]))\n    });\n  }\n\n  ngOnInit() {\n    this.dataService.groups(this.groupId).valueChanges().subscribe((group) => {\n      this.group = group;\n    });\n    // let get the databse from the current user\n    this.dataService.getCurrentUser(firebase.auth().currentUser.uid).valueChanges().subscribe((user) => {\n      this.user = user;\n    })\n\n    this.dataService.groups(this.groupId).valueChanges().subscribe((data) => {\n      this.groupName = data.name\n    });\n  }\n\n  // save the changes that your made \n  saveChanges() {\n    if (this.name === 'name' && this.changeName != '') {\n      if (this.group.name != this.changeName) {\n        this.loading.show();\n        this.dataService.groups(this.groupId).update({\n          name: this.changeName,\n        }).then(() => {\n          firebase.database().ref('groups').child(this.groupId).child('messages').push({\n            date: new Date().toString(),\n            userId: firebase.auth().currentUser.uid,\n            type: 'system',\n            message: this.user.nikeName + ' has change the group name to: ' + this.changeName + '.',\n            icon: 'create'\n          }).then((sucess) => {\n            let key = sucess.key\n            for (let i = 0; i < this.group.members.length; i++) {\n              firebase.database().ref('accounts').child(this.group.members[i]).child('groups').child(this.groupId).child('messagesRead').push({\n                key: key\n              })\n            }\n            this.loading.hide();\n            this.alertService.showGroupUpdatedMessage();\n            this.navCtrl.pop();\n          }).catch((error) => {\n            this.loading.hide();\n            this.alertService.showErrorMessage('group/error-update-group');\n          })\n        })\n      }\n    } else if (this.name === 'dec' && this.description != '') {\n      this.loading.show();\n      firebase.database().ref(\"group/\").child(this.groupId).once(\"value\").then((user) => {\n        if (user.val()) {\n          this.angularDb.object(\"group/\" + this.groupId).update({\n            description: this.description\n          }).then(() => {\n            firebase.database().ref('groups').child(this.groupId).child('messages').push({\n              date: new Date().toString(),\n              userId: firebase.auth().currentUser.uid,\n              type: 'system',\n              message: this.user.nikeName + ' has change the group name to: ' + this.description + '.',\n              icon: 'create'\n            }).then((sucess) => {\n              let key = sucess.key\n              for (let i = 0; i < this.group.members.length; i++) {\n                firebase.database().ref('accounts').child(this.group.members[i]).child('groups').child(this.groupId).child('messagesRead').push({\n                  key: key\n                })\n              }\n              this.loading.hide();\n              this.alertService.showGroupUpdatedMessage();\n              this.navCtrl.pop()\n            }).catch((error) => {\n              this.loading.hide();\n              this.alertService.showErrorMessage('group/error-update-group');\n            })\n          })\n        }\n      })\n    }\n  }\n\n  // this handele the back buttom\n  back() {\n    this.navCtrl.pop()\n  }\n\n\n\n\n\n}\n"]}
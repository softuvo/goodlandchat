{"version":3,"sources":["webpack:///src/app/pages/verify/verify.page.html","webpack:///src/app/pages/verify/verify-routing.module.ts","webpack:///src/app/pages/verify/verify.module.ts","webpack:///src/app/pages/verify/verify.page.scss","webpack:///src/app/pages/verify/verify.page.ts"],"names":["routes","path","component","VerifyPageRoutingModule","imports","forChild","exports","VerifyPageModule","declarations","VerifyPage","router","dataService","angularDb","loading","formBuilder","alertCtrl","afstorage","camera","name","group","updateName","compose","minLength","required","getCurrentUser","currentUser","uid","valueChanges","subscribe","user","image","img","nikeName","show","ref","once","then","profile","val","object","update","hide","navigateByUrl","create","header","buttons","text","role","handler","profilePictureCamera","cssClass","profilePictureGallery","alert","present","dataURI","binary","atob","split","mimeString","array","i","length","push","charCodeAt","Blob","Uint8Array","type","message","possible","charAt","Math","floor","random","option","quality","targetHeight","targetWidth","sourceType","PictureSourceType","CAMERA","destinationType","DestinationType","DATA_URL","encodingType","EncodingType","JPEG","correctOrientation","allowEdit","getPicture","imageData","showPro","url","imgBlob","imgURItoBlob","metadata","task","put","snapshotChanges","pipe","getDownloadURL","hidePro","showAlert","error","PHOTOLIBRARY","generateFilename","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,uBAAuB;AAAA;AAAA,O;;AAAvBA,6BAAuB,6DAJnC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAImC,GAAvBH,uBAAuB,CAAvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCIAI,gBAAgB;AAAA;AAAA,O;;AAAhBA,sBAAgB,6DAV5B,+DAAS;AACRH,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,kEAJO,EAKP,8EALO,CADD;AAQRI,oBAAY,EAAE,CAAC,uDAAD;AARN,OAAT,CAU4B,GAAhBD,gBAAgB,CAAhB;;;;;;;;;;;;;;;;ACpBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;;;;;UAyBaE,UAAU;AAWrB,4BACUC,MADV,EAEUC,WAFV,EAGSC,SAHT,EAIUC,OAJV,EAKSC,WALT,EAMUC,SANV,EAOUC,SAPV,EAQUC,MARV,EAQwB;AAAA;;AAPd,eAAAP,MAAA,GAAAA,MAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACD,eAAAC,SAAA,GAAAA,SAAA;AACC,eAAAC,OAAA,GAAAA,OAAA;AACD,eAAAC,WAAA,GAAAA,WAAA;AACC,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AAGR,eAAKC,IAAL,GAAY,KAAKJ,WAAL,CAAiBK,KAAjB,CAAuB;AACjCC,sBAAU,EAAE,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWC,OAAX,CAAmB,CACjD,0DAAWC,SAAX,CAAqB,CAArB,CADiD,EAEjD,0DAAWC,QAFsC,CAAnB,CAApB;AADqB,WAAvB,CAAZ,CAHsB,CAStB;AACD;;AA7BoB;AAAA;AAAA,qCA+BV;AAAA;;AACT;AACA;AACA,iBAAKZ,WAAL,CAAiBa,cAAjB,CAAgC,gDAAgBC,WAAhB,CAA4BC,GAA5D,EAAiEC,YAAjE,GAAgFC,SAAhF,CAA0F,UAACC,IAAD,EAAU;AAClG,mBAAI,CAACC,KAAL,GAAaD,IAAI,CAACE,GAAlB;AACA,mBAAI,CAACC,QAAL,GAAgBH,IAAI,CAACG,QAArB;AACD,aAHD;AAKD,WAvCoB,CAyCrB;;AAzCqB;AAAA;AAAA,mCA0CZ;AAAA;;AACP,iBAAKnB,OAAL,CAAaoB,IAAb;AACA,gEAAoBC,GAApB,CAAwB,cAAc,gDAAgBT,WAAhB,CAA4BC,GAAlE,EAAuES,IAAvE,CAA4E,OAA5E,EAAqFC,IAArF,CAA0F,UAACC,OAAD,EAAa;AACrG,kBAAIA,OAAO,CAACC,GAAR,EAAJ,EAAmB;AACjB,sBAAI,CAAC1B,SAAL,CAAe2B,MAAf,CAAsB,cAAc,gDAAgBd,WAAhB,CAA4BC,GAAhE,EAAqEc,MAArE,CAA4E;AAC1ER,0BAAQ,EAAE,MAAI,CAACA;AAD2D,iBAA5E,EAEGI,IAFH,CAEQ,YAAM;AACZ,wBAAI,CAACvB,OAAL,CAAa4B,IAAb;;AACA,wBAAI,CAAC/B,MAAL,CAAYgC,aAAZ,CAA0B,OAA1B;AACD,iBALD;AAMD;AACF,aATD;AAWD,WAvDoB,CAyDrB;;AAzDqB;AAAA;AAAA,yCA0DA;;;;;;;;;;AACL,6BAAM,KAAK3B,SAAL,CAAe4B,MAAf,CAAsB;AACxCC,8BAAM,EAAE,wBADgC;AAExCC,+BAAO,EAAE,CACP;AACEC,8BAAI,EAAE,QADR;AAEEC,8BAAI,EAAE,QAFR;AAGEC,iCAAO,EAAE,mBAAM;AACb,kCAAI,CAACC,oBAAL;AACD;AALH,yBADO,EAQP;AACEH,8BAAI,EAAE,SADR;AAEEI,kCAAQ,EAAE,WAFZ;AAGEH,8BAAI,EAAE,SAHR;AAIEC,iCAAO,EAAE,mBAAM;AACb,kCAAI,CAACG,qBAAL;AACD;AANH,yBARO;AAF+B,uBAAtB,CAAN;;;AAARC,2B;;AAoBN,6BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;;AACD;AAhFoB;AAAA;AAAA,uCAmFRC,OAnFQ,EAmFC;AACpB,gBAAIC,MAAM,GAAGC,IAAI,CAACF,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,CAAD,CAAjB;AACA,gBAAIC,UAAU,GAAGJ,OAAO,CAACG,KAAR,CAAc,GAAd,EAAmB,CAAnB,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,EAA+C,CAA/C,CAAjB;AACA,gBAAIE,KAAK,GAAG,EAAZ;;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACM,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCD,mBAAK,CAACG,IAAN,CAAWP,MAAM,CAACQ,UAAP,CAAkBH,CAAlB,CAAX;AACD;;AACD,mBAAO,IAAII,IAAJ,CAAS,CAAC,IAAIC,UAAJ,CAAeN,KAAf,CAAD,CAAT,EAAkC;AACvCO,kBAAI,EAAER;AADiC,aAAlC,CAAP;AAGD;AA7FoB;AAAA;AAAA,oCA+FLd,MA/FK,EA+FWuB,OA/FX,EA+F4B;;;;;;;;AACjC,6BAAM,KAAKpD,SAAL,CAAe4B,MAAf,CAAsB;AACxCC,8BAAM,EAANA,MADwC;AAExCuB,+BAAO,EAAPA,OAFwC;AAGxCtB,+BAAO,EAAE,CAAC,IAAD;AAH+B,uBAAtB,CAAN;;;AAARO,2B;;AAKN,6BAAMA,KAAK,CAACC,OAAN,EAAN;;;;;;;;;AACD;AAtGoB;AAAA;AAAA,6CAwGF;AACjB,gBAAIQ,MAAM,GAAG,CAAb;AACA,gBAAIf,IAAI,GAAG,EAAX;AACA,gBAAIsB,QAAQ,GAAG,gEAAf;;AACA,iBAAK,IAAIR,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,MAApB,EAA4BD,CAAC,EAA7B,EAAiC;AAC/Bd,kBAAI,IAAIsB,QAAQ,CAACC,MAAT,CAAgBC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBJ,QAAQ,CAACP,MAApC,CAAhB,CAAR;AACD;;AACD,mBAAOf,IAAI,GAAG,MAAd;AACD,WAhHoB,CAkHrB;;AAlHqB;AAAA;AAAA,iDAmHQ;;;;;;;;;AACrB2B,4B,GAAwB;AAC5BC,+BAAO,EAAE,GADmB;AAE5BC,oCAAY,EAAE,GAFc;AAG5BC,mCAAW,EAAE,GAHe;AAI5BC,kCAAU,EAAE,KAAK5D,MAAL,CAAY6D,iBAAZ,CAA8BC,MAJd;AAK5BC,uCAAe,EAAE,KAAK/D,MAAL,CAAYgE,eAAZ,CAA4BC,QALjB;AAM5BC,oCAAY,EAAE,KAAKlE,MAAL,CAAYmE,YAAZ,CAAyBC,IANX;AAO5BC,0CAAkB,EAAE,IAPQ;AAQ5BC,iCAAS,EAAE;AARiB,uB;;AAU9B,0BAAI;AACF;AACA;AACA,6BAAKtE,MAAL,CAAYuE,UAAZ,CAAuBf,MAAvB,EAA+BrC,IAA/B,CAAoC,UAACqD,SAAD,EAAe;AACjD,gCAAI,CAAC5E,OAAL,CAAa6E,OAAb;;AACA,8BAAIC,GAAG,GAAG,4BAA4BF,SAAtC;;AACA,8BAAIG,OAAO,GAAG,MAAI,CAACC,YAAL,CAAkBF,GAAlB,CAAd;;AACA,8BAAIG,QAAQ,GAAG;AACb,2CAAeF,OAAO,CAAC1B;AADV,2BAAf;;AAGA,8BAAMhC,GAAG,GAAG,MAAI,CAAClB,SAAL,CAAekB,GAAf,CAAmB,gBAAgB,gDAAgBT,WAAhB,CAA4BC,GAA/D,CAAZ;;AACA,8BAAMqE,IAAI,GAAG7D,GAAG,CAAC8D,GAAJ,CAAQJ,OAAR,EAAiBE,QAAjB,CAAb,CARiD,CASjD;;AACAC,8BAAI,CAACE,eAAL,GAAuBC,IAAvB,CACE,iEAAS;AAAA,mCAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnBhE,yCAAG,CAACiE,cAAJ,GAAqBvE,SAArB,CAA+B,UAACE,KAAD,EAAW;AACxC,8CAAI,CAAClB,SAAL,CAAe2B,MAAf,CAAsB,eAAe,gDAAgBd,WAAhB,CAA4BC,GAAjE,EAAsEc,MAAtE,CAA6E;AAC3ET,6CAAG,EAAED;AADsE,yCAA7E,EAEGM,IAFH,CAEQ,YAAM;AACZ,gDAAI,CAACvB,OAAL,CAAauF,OAAb;;AACA,gDAAI,CAACC,SAAL,CAAe,SAAf,EAA0B,uCAA1B;AACD,yCALD;AAMD,uCAPD;;AADmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAZ;AAAA,2BAAT,CADF,EAYEzE,SAZF;AAaD,yBAvBD;AAwBD,uBA3BD,CA2BE,OAAO0E,KAAP,EAAc,CAEf;;;;;;;;;AACF;AA5JoB;AAAA;AAAA,kDA8JS;;;;;;;;;AACtB7B,4B,GAAwB;AAC5BC,+BAAO,EAAE,GADmB;AAE5BC,oCAAY,EAAE,GAFc;AAG5BC,mCAAW,EAAE,GAHe;AAI5BC,kCAAU,EAAE,KAAK5D,MAAL,CAAY6D,iBAAZ,CAA8ByB,YAJd;AAK5BvB,uCAAe,EAAE,KAAK/D,MAAL,CAAYgE,eAAZ,CAA4BC,QALjB;AAM5BC,oCAAY,EAAE,KAAKlE,MAAL,CAAYmE,YAAZ,CAAyBC,IANX;AAO5BC,0CAAkB,EAAE,IAPQ;AAQ5BC,iCAAS,EAAE;AARiB,uB;;AAU9B,0BAAI;AACF;AACA;AACA,6BAAKtE,MAAL,CAAYuE,UAAZ,CAAuBf,MAAvB,EAA+BrC,IAA/B,CAAoC,UAACqD,SAAD,EAAe;AACjD,gCAAI,CAAC5E,OAAL,CAAa6E,OAAb;;AACA,8BAAIC,GAAG,GAAG,4BAA4BF,SAAtC;;AACA,8BAAIG,OAAO,GAAG,MAAI,CAACC,YAAL,CAAkBF,GAAlB,CAAd;;AACA,8BAAIG,QAAQ,GAAG;AACb,2CAAeF,OAAO,CAAC1B;AADV,2BAAf;;AAGA,8BAAMhC,GAAG,GAAG,MAAI,CAAClB,SAAL,CAAekB,GAAf,CAAmB,gBAAgB,gDAAgBT,WAAhB,CAA4BC,GAA5C,GAAkD,MAAI,CAAC8E,gBAAL,EAArE,CAAZ;;AACA,8BAAMT,IAAI,GAAG7D,GAAG,CAAC8D,GAAJ,CAAQJ,OAAR,EAAiBE,QAAjB,CAAb,CARiD,CASjD;;AACAC,8BAAI,CAACE,eAAL,GAAuBC,IAAvB,CACE,iEAAS;AAAA,mCAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnBhE,yCAAG,CAACiE,cAAJ,GAAqBvE,SAArB,CAA+B,UAACE,KAAD,EAAW;AACxC,8CAAI,CAAClB,SAAL,CAAe2B,MAAf,CAAsB,eAAe,gDAAgBd,WAAhB,CAA4BC,GAAjE,EAAsEc,MAAtE,CAA6E;AAC3ET,6CAAG,EAAED;AADsE,yCAA7E,EAEGM,IAFH,CAEQ,YAAM;AACZ,gDAAI,CAACvB,OAAL,CAAauF,OAAb;;AACA,gDAAI,CAACC,SAAL,CAAe,SAAf,EAA0B,uCAA1B;AACD,yCALD;AAMD,uCAPD;;AADmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAZ;AAAA,2BAAT,CADF,EAYEzE,SAZF;AAaD,yBAvBD;AAwBD,uBA3BD,CA2BE,OAAO0E,KAAP,EAAc,CAEf;;;;;;;;;AACF;AAvMoB;;AAAA;AAAA,S;;;;gBAfd;;gBAFA;;gBAIA;;gBACA;;gBACW;;gBAPX;;gBAQA;;gBACA;;;;AASI7F,gBAAU,6DALtB,gEAAU;AACTgG,gBAAQ,EAAE,YADD;AAETC,gBAAQ,EAAR;AAAA;AAAA,oGAFS;;;;AAAA,OAAV,CAKsB,GAAVjG,UAAU,CAAV","file":"pages-verify-verify-module-es5.js","sourcesContent":["export default \"<ion-content class=\\\"ion-padding\\\">\\n    <div class=\\\"label\\\">\\n        <ion-label>Profile info</ion-label>\\n    </div>\\n    <p class=\\\"p\\\">\\n        Please provide your name and an optional profile photo\\n    </p>\\n    \\n    <div class=\\\"profileimage\\\" *ngIf=\\\"image === 'assets/profile.png'\\\">\\n        <img src=\\\"assets/camera.png\\\" alt=\\\"\\\" (click)=\\\"cameraOption()\\\">\\n    </div>\\n    <div class=\\\"profileimage\\\" *ngIf=\\\"image != 'assets/profile.png'\\\">\\n        <img src=\\\"{{image}}\\\" alt=\\\"\\\" (click)=\\\"cameraOption()\\\">\\n    </div>\\n\\n    <div style=\\\"padding-top: 50px;\\\">\\n        <form [formGroup]=\\\"name\\\">\\n            <ion-item>\\n                <ion-input formControlName=\\\"updateName\\\" value={{nikeName}} type=\\\"text\\\" placeholder=\\\"Type your name here\\\" [(ngModel)]=\\\"nikeName\\\"></ion-input>\\n                <ion-icon slot=\\\"end\\\" src=\\\"assets/smile.svg\\\"></ion-icon>\\n            </ion-item>\\n        </form>\\n       \\n    </div>\\n\\n    <div class=\\\"button\\\">\\n        <ion-button expand=\\\"block\\\" (click)=\\\"update()\\\" [disabled]=\\\"!name.valid\\\">\\n            NEXT\\n        </ion-button>\\n    </div>\\n\\n\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VerifyPage } from './verify.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VerifyPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VerifyPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VerifyPageRoutingModule } from './verify-routing.module';\n\nimport { VerifyPage } from './verify.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    VerifyPageRoutingModule\n  ],\n  declarations: [VerifyPage]\n})\nexport class VerifyPageModule {}\n","export default \".label {\\n  text-align: center;\\n  font-size: larger;\\n  font-weight: 700;\\n  margin: 15px;\\n  color: #4d9061;\\n}\\n\\n.p {\\n  text-align: center;\\n  font-size: medium;\\n  padding-top: 15px;\\n}\\n\\nhr {\\n  background: #4d9061;\\n  width: 180px;\\n}\\n\\n.button {\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  margin: 15px;\\n  bottom: 0;\\n}\\n\\ndiv.profileimage {\\n  padding: 3px;\\n  display: flex;\\n  flex-flow: row nowrap;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 100%;\\n}\\n\\ndiv.profileimage img {\\n  width: 35%;\\n  height: 100%;\\n  border-radius: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvdmVyaWZ5L3ZlcmlmeS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUVBO0VBQ0ksa0JBQUE7RUFDQSxpQkFBQTtFQUNBLGlCQUFBO0FBQ0o7O0FBQ0E7RUFDSSxtQkFBQTtFQUNBLFlBQUE7QUFFSjs7QUFBQTtFQUNJLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxZQUFBO0VBQ0EsU0FBQTtBQUdKOztBQUFBO0VBQ0ksWUFBQTtFQUNBLGFBQUE7RUFDQSxxQkFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQUdKOztBQUZJO0VBQ0ksVUFBQTtFQUNBLFlBQUE7RUFDQSxtQkFBQTtBQUlSIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvdmVyaWZ5L3ZlcmlmeS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubGFiZWwge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgZm9udC1zaXplOiBsYXJnZXI7XHJcbiAgICBmb250LXdlaWdodDogNzAwO1xyXG4gICAgbWFyZ2luOiAxNXB4O1xyXG4gICAgY29sb3I6ICM0ZDkwNjE7XHJcbiAgICAvLyBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcclxufVxyXG4ucCB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBmb250LXNpemU6IG1lZGl1bTtcclxuICAgIHBhZGRpbmctdG9wOiAxNXB4O1xyXG59XHJcbmhyIHtcclxuICAgIGJhY2tncm91bmQ6ICM0ZDkwNjE7XHJcbiAgICB3aWR0aDogMTgwcHg7XHJcbn1cclxuLmJ1dHRvbiB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgcmlnaHQ6IDA7XHJcbiAgICBtYXJnaW46IDE1cHg7XHJcbiAgICBib3R0b206IDA7XHJcbn1cclxuXHJcbmRpdi5wcm9maWxlaW1hZ2Uge1xyXG4gICAgcGFkZGluZzogM3B4O1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZmxvdzogcm93IG5vd3JhcDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgICBpbWcge1xyXG4gICAgICAgIHdpZHRoOiAzNSU7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDEwMCU7XHJcbiAgICB9XHJcbn1cclxuIl19 */\";","/*\n* WhatsApp in Ionic 5 application  (https://github.com/habupagas/ionic-5-WhatsApp)\n* Copyright  @2020-present. All right reserved.\n* Author: Abubakar Pagas\n*/\n\n\nimport { AlertController } from '@ionic/angular';\nimport { DataService } from './../../services/data.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport * as firebase from 'firebase';\nimport { AngularFireDatabase } from '@angular/fire/database';\nimport { LoadingService } from 'src/app/services/loading.service';\nimport { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { finalize } from 'rxjs/operators';\n\n\n@Component({\n  selector: 'app-verify',\n  templateUrl: './verify.page.html',\n  styleUrls: ['./verify.page.scss'],\n})\nexport class VerifyPage implements OnInit {\n\n\n  userId: any;\n  image: any;\n  nikeName: any;\n  usernameUpdate: any;\n\n  public name: FormGroup;\n\n\n  constructor(\n    private router: Router,\n    private dataService: DataService,\n    public angularDb: AngularFireDatabase,\n    private loading: LoadingService,\n    public formBuilder: FormBuilder,\n    private alertCtrl: AlertController,\n    private afstorage: AngularFireStorage,\n    private camera: Camera,\n\n  ) {\n    this.name = this.formBuilder.group({\n      updateName: new FormControl('', Validators.compose([\n        Validators.minLength(3),\n        Validators.required,\n      ])),\n    });\n    // this.userId = firebase.auth().currentUser.uid;\n  }\n\n  ngOnInit() {\n    // if already open an account\n    // or get the current account\n    this.dataService.getCurrentUser(firebase.auth().currentUser.uid).valueChanges().subscribe((user) => {\n      this.image = user.img;\n      this.nikeName = user.nikeName;\n    })\n\n  }\n\n  // this handle fi already authenticate will be exit the app\n  update() {\n    this.loading.show();\n    firebase.database().ref(\"accounts/\" + firebase.auth().currentUser.uid).once(\"value\").then((profile) => {\n      if (profile.val()) {\n        this.angularDb.object(\"accounts/\" + firebase.auth().currentUser.uid).update({\n          nikeName: this.nikeName\n        }).then(() => {\n          this.loading.hide()\n          this.router.navigateByUrl(\"/home\")\n        })\n      }\n    })\n\n  }\n\n  //handle the camera option\n  async cameraOption() {\n    const alert = await this.alertCtrl.create({\n      header: 'Select Profile Picture',\n      buttons: [\n        {\n          text: 'Camera',\n          role: 'camera',\n          handler: () => {\n            this.profilePictureCamera()\n          }\n        },\n        {\n          text: 'Gallery',\n          cssClass: 'secondary',\n          role: 'gallery',\n          handler: () => {\n            this.profilePictureGallery()\n          }\n        },\n      ]\n    })\n    await alert.present();\n  }\n\n\n  imgURItoBlob(dataURI) {\n    var binary = atob(dataURI.split(',')[1]);\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n    var array = [];\n    for (var i = 0; i < binary.length; i++) {\n      array.push(binary.charCodeAt(i));\n    }\n    return new Blob([new Uint8Array(array)], {\n      type: mimeString\n    });\n  }\n\n  async showAlert(header: string, message: string) {\n    const alert = await this.alertCtrl.create({\n      header,\n      message,\n      buttons: [\"OK\"],\n    })\n    await alert.present();\n  }\n\n  generateFilename() {\n    var length = 8;\n    var text = \"\";\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    for (var i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text + \".jpg\";\n  }\n\n  //for update the profile picture \n  async profilePictureCamera() {\n    const option: CameraOptions = {\n      quality: 100,\n      targetHeight: 530,\n      targetWidth: 530,\n      sourceType: this.camera.PictureSourceType.CAMERA,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      correctOrientation: true,\n      allowEdit: true\n    }\n    try {\n      // this handle the upload to the firebase \n      // it handle the selection from the image after will be upload to firebase storage \n      this.camera.getPicture(option).then((imageData) => {\n        this.loading.showPro()\n        let url = \"data:image/jpeg;base64,\" + imageData;\n        let imgBlob = this.imgURItoBlob(url);\n        let metadata = {\n          'contentType': imgBlob.type\n        };\n        const ref = this.afstorage.ref('/myProfile/' + firebase.auth().currentUser.uid)\n        const task = ref.put(imgBlob, metadata)\n        //this will be delete for ther existing one\n        task.snapshotChanges().pipe(\n          finalize(async () => {\n            ref.getDownloadURL().subscribe((image) => {\n              this.angularDb.object('/accounts/' + firebase.auth().currentUser.uid).update({\n                img: image\n              }).then(() => {\n                this.loading.hidePro();\n                this.showAlert('Profile', 'Your profile picture has been updated')\n              })\n            });\n\n          })\n        ).subscribe()\n      })\n    } catch (error) {\n\n    }\n  }\n\n  async profilePictureGallery() {\n    const option: CameraOptions = {\n      quality: 100,\n      targetHeight: 530,\n      targetWidth: 530,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      correctOrientation: true,\n      allowEdit: true\n    }\n    try {\n      // this handle the upload to the firebase \n      // it handle the selection from the image after will be upload to firebase storage \n      this.camera.getPicture(option).then((imageData) => {\n        this.loading.showPro()\n        let url = \"data:image/jpeg;base64,\" + imageData;\n        let imgBlob = this.imgURItoBlob(url);\n        let metadata = {\n          'contentType': imgBlob.type\n        };\n        const ref = this.afstorage.ref('/myProfile/' + firebase.auth().currentUser.uid + this.generateFilename())\n        const task = ref.put(imgBlob, metadata)\n        //this will be delete for ther existing one\n        task.snapshotChanges().pipe(\n          finalize(async () => {\n            ref.getDownloadURL().subscribe((image) => {\n              this.angularDb.object('/accounts/' + firebase.auth().currentUser.uid).update({\n                img: image\n              }).then(() => {\n                this.loading.hidePro();\n                this.showAlert('Profile', 'Your profile picture has been updated')\n              })\n            });\n\n          })\n        ).subscribe()\n      })\n    } catch (error) {\n\n    }\n  }\n\n}\n"]}